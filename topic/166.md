# 小强ROS机器人教程(15)___AMCL导航测试<br>
[小强主页](https://www.bwbot.org/products/xiaoqiang-4-pro)

下文将演示AMCL导航操作，使用rplidar a2作为scan输入，[教程14](http://community.bwbot.org/topic/164/)中建立的地图文件作为全局map

启动导航节点
先将教程14中建立的两个map文件拷贝到`/home/xiaoqiang/Documents/ros/src/nav_test/maps/`下，覆盖同名文件即可

```bash
# 对于rplidar a1或者a2
roslaunch nav_test xiaoqiang_a2_demo_amcl.launch
# 对于rplidar a3
roslaunch nav_test xiaoqiang_a3_demo_amcl.launch
# 对于星秒pavo激光雷达
roslaunch nav_test xiaoqiang_pavo_demo_amcl.launch
# 对于镭神ls01b激光雷达
roslaunch nav_test xiaoqiang_ls01b_demo_amcl.launch
# 对于sc-mini激光雷达
roslaunch nav_test xiaoqiang_scmini_demo_amcl.launch
```

正常会出现下图的类似结果，同时雷达开始旋转

![0_1488440713169_open0.PNG](https://community.bwbot.org/uploads/files/1488440715430-open0-resized.png) 

三、打开操作客户端

1.在机器人中启动rviz,选择打开小强ros工作目录下的`nav_test/config/xiaoqiang_amcl.rviz`配置文件

```bash
rviz
```

![0_1488441020673_open1.PNG](https://community.bwbot.org/uploads/files/1488441022778-open1-resized.png) 

2.等待几秒后，rviz正常会出现类似下图的界面

![0_1488441236202_open2.PNG](https://community.bwbot.org/uploads/files/1488441238301-open2-resized.png) 

四、开始导航测试

1.在rviz中使用2D Pose Estimation设置机器人的初始pose在map中的位置，因为AMCL算法需要一个较为精确的初始值，才能进一步由当前雷达扫描点阵匹配出机器人在map中的真实位置。

![0_1488442048453_open3.PNG](https://community.bwbot.org/uploads/files/1488442051345-open3-resized.png) 

2.在rviz中使用2D Nav Goal 给小强发布目标点

![0_1488442695118_Screenshot from 2017-03-02 16^%16^%07.png](https://community.bwbot.org/uploads/files/1488442697474-screenshot-from-2017-03-02-16-16-07-resized.png) 

3.小强开始自主移动到指定位置

![0_1488442773853_open0.PNG](https://community.bwbot.org/uploads/files/1488442775969-open0-resized.png) 

五、请自由设置小强的2D Nav Goal,观察小强的运动情况，本文结束
![0_1488443164872_open1.PNG](https://community.bwbot.org/uploads/files/1488443167303-open1-resized.png) 

![0_1488444135666_open3.PNG](https://community.bwbot.org/uploads/files/1488444137990-open3-resized.png)

[小强主页](https://www.bwbot.org/products/xiaoqiang-4-pro)
[返回目录](https://community.bwbot.org/topic/110)
