# 小强ROS机器人教程(14)___在gmapping下使用激光雷达进行建图<br>
[小强主页](https://www.bwbot.org/products/xiaoqiang-4-pro)

### 1、安装gmapping，2017年3月3日之后收到货的用户可以跳过这个安装步骤，直接从步骤2开始

#### vnc登录小强主机,进入小强ros工作空间

```bash
cd Documents/ros/src/
```
#### 下载两个ros软件包[gmapping](http://wiki.ros.org/gmapping)、[openslam_gmapping](http://wiki.ros.org/openslam_gmapping?distro=kinetic)
```
git clone https://gitee.com/bluewhaleRobot/slam_gmapping
git clone https://gitee.com/bluewhaleRobot/openslam_gmapping
```
#### 编译、完成安装
```
cd ..
catkin_make
```
### 2、启动gmapping节点

#### 确保雷达安装正确，vnc进入小强主机后启动gmapping中的launch文件

```bash
如果是rplidar a1或者a2
roslaunch gmapping slam_gmapping_xiaoqiang_rplidar_a2.launch
# 如果是rplidar a3则启动
roslaunch gmapping slam_gmapping_xiaoqiang_rplidar_a3.launch
# 如果是星秒pavo激光雷达
roslaunch gmapping slam_gmapping_xiaoqiang_pavo.launch
# 如果是镭神ls01b激光雷达
roslaunch gmapping slam_gmapping_xiaoqiang_ls01b.launch
# 如果是sc-mini激光雷达
roslaunch gmapping slam_gmapping_xiaoqiang_scmini.launch
```
#### 机器人打开rviz，选择打开小强ros工作目录下的slam_gmapping/gmapping/launch/rplidar_a2_test.rviz配置文件

```bash
rviz
```

![0_1488360661097_open0.PNG](https://community.bwbot.org/uploads/files/1488360662120-open0-resized.png)

#### 等待几秒，正常情况会出现下图的类似结果

![0_1488360723640_open1.PNG](https://community.bwbot.org/uploads/files/1488360737623-open1-resized.png) 

### 3、遥控小强运动开始建图

#### 第一种方式，使用windows遥控端，参考这篇帖子([小强图传遥控windows客户端](http://community.bwbot.org/topic/163/))

#### 第二种方式，使用手机app,参考这篇贴子（[小强手机遥控app安卓版](http://community.bwbot.org/topic/159)）

![0_1488360995085_open2.PNG](https://community.bwbot.org/uploads/files/1488360995733-open2-resized.png) 

### 4、保存地图，本文结束

#### vnc登录小强，在小强home目录下保存为work0开头的文件

```bash
rosrun map_server map_saver -f work0
```

![0_1488361203373_open3.PNG](https://community.bwbot.org/uploads/files/1488361203759-open3-resized.png)

[小强主页](https://www.bwbot.org/products/xiaoqiang-4-pro)
[返回目录](https://community.bwbot.org/topic/110)
